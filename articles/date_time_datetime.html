<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Dates, Times, and Datetimes • datasetjson</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Dates, Times, and Datetimes">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-165685385-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-165685385-2');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">datasetjson</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/datasetjson.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Vignettes</h6></li>
    <li><a class="dropdown-item" href="../articles/date_time_datetime.html">Dates, Times, and Datetimes</a></li>
    <li><a class="dropdown-item" href="../articles/converting_files.html">Converting from XPT</a></li>
    <li><a class="dropdown-item" href="../articles/odm_details.html">Notes on ODM V2</a></li>
    <li><a class="dropdown-item" href="../articles/precision.html">Numeric Precision</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/atorus-research/datasetjson" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Dates, Times, and Datetimes</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/atorus-research/datasetjson/blob/main/vignettes/date_time_datetime.Rmd" class="external-link"><code>vignettes/date_time_datetime.Rmd</code></a></small>
      <div class="d-none name"><code>date_time_datetime.Rmd</code></div>
    </div>

    
    
<p>Dataset JSON Version 1.1 provides a significant improvement of the
handling of dates and times. In version 1.0, there wasn’t a clear
instruction around anchoring the origin of numeric dates and date times,
and given that SAS uses 1960-01-01 and R uses the POSIX date of
1970-01-01, this created a slightly complex discrepancy. Version 1.1
instead opts to use ISO8601 formatted dates, times, and date times, and
the target data type is clearly stated within the column metadata. This
makes the true date value unambiguous.</p>
<p>Starting in <strong>{datasetjson}</strong> v0.3.0 we’ve introduce
support for Dataset JSON v1.1.0. As such, we automatically handle date,
time, and date time conversions. There are a few considerations you need
to make when dealing with these types to make things work properly.</p>
<div class="section level2">
<h2 id="metadata-settings">Metadata Settings<a class="anchor" aria-label="anchor" href="#metadata-settings"></a>
</h2>
<p>Version 5 SAS Transport Files didn’t have a notion of a “date”,
“time” or “datetime” type. Instead, using the SAS convention these were
just Integer values with a display format attached. Dataset JSON Version
1.1 explicitly clarifies numeric date types using the
<code>dataType</code> and <code>targetDataType</code> fields in the
columns metadata. Consider these variables.</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="14%">
<col width="8%">
<col width="19%">
<col width="9%">
<col width="7%">
<col width="15%">
<col width="14%">
<col width="12%">
</colgroup>
<thead><tr class="header">
<th align="left">itemOID</th>
<th align="left">name</th>
<th align="left">label</th>
<th align="left">dataType</th>
<th align="right">length</th>
<th align="left">targetDataType</th>
<th align="left">displayFormat</th>
<th align="right">keySequence</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">IT.DF.CHARDT</td>
<td align="left">CHARDT</td>
<td align="left">Character Date</td>
<td align="left">date</td>
<td align="right">8</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">IT.DF.CHARTM</td>
<td align="left">CHARTM</td>
<td align="left">Character Time</td>
<td align="left">time</td>
<td align="right">10</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">IT.DF.CHARDTM</td>
<td align="left">CHARDTM</td>
<td align="left">Character Datetime</td>
<td align="left">datetime</td>
<td align="right">19</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">IT.DF.NUMDT</td>
<td align="left">NUMDT</td>
<td align="left">Numeric date</td>
<td align="left">time</td>
<td align="right">NA</td>
<td align="left">integer</td>
<td align="left">TIME8</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">IT.DF.NUMTM</td>
<td align="left">NUMTM</td>
<td align="left">Numeric time</td>
<td align="left">time</td>
<td align="right">NA</td>
<td align="left">integer</td>
<td align="left">TIME8</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">IT.DF.NUMDTM</td>
<td align="left">NUMDTM</td>
<td align="left">Numeric datetime</td>
<td align="left">datetime</td>
<td align="right">NA</td>
<td align="left">integer</td>
<td align="left">E8601DT</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<p>In the table above, we have the metadata for both character and
numeric dates, times, and date times. Both sets of variables have the
same values within <code>dataType</code>. The difference is the optional
field of <code>targetDataType</code>, where the value for the numeric
variables is set to <code>integer</code>. Both
<code><a href="../reference/read_dataset_json.html">read_dataset_json()</a></code> and <code><a href="../reference/write_dataset_json.html">write_dataset_json()</a></code>
rely on these fields and as such they must be set properly. This comes
with a few assumption and requirements.</p>
<ul>
<li>Numeric dates will be converted into the type of <code>Date</code>
(see <code><a href="https://rdrr.io/r/base/Dates.html" class="external-link">help("Date", package="base")</a></code>)</li>
<li>Numeric times will be converted to the <strong>{hms}</strong> type
of <code>hms</code>
</li>
<li>R doesn’t have a specific built in type of time. We decided to take
on <strong>{hms}</strong> as a dependency given that this is the type
using by the <strong>{haven}</strong> package when reading SAS Version 5
Transport files. As such, similar behavior can be expected when
importing an XPT or a Dataset JSON file.</li>
<li>Numeric date times will be converted to the base R type of
<code>POSIXct</code> and anchored to the UTC timezone.</li>
<li>CDISC dates are generally not timezone qualified, though for
character dates, this is optional. Unless a timezone is explicitly
specified systems may default to the user’s current timezone. To
decrease ambiguity, we’ve introduced a hard requirement that datetimes
are anchored to UTC. If the datetime variable is found to be using a
different timezone, an error will be thrown.</li>
</ul>
<p>If any of these assumption don’t work for your purpose or if you find
other situations we need to handle, please leave an issue on Github as
we want to make sure we support the community as best we can.</p>
</div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mike Stackhouse, Nicholas Masel.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
